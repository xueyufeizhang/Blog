---
import Footer from '@/components/Footer.astro';
import Navbar from '@/components/Navbar.astro';
import Section from '@/components/Section.astro'; // å¼•å…¥ Section ç¡®ä¿é€»è¾‘å¯¹é½ä¸€è‡´ 
import { AppConfig } from '@/utils/AppConfig';
import '@/styles/global.css';
import PostHog from '@/components/posthog.astro';

export interface Props {
	head: {
		title: string;
		description: string;
	};
}

const {
	head: { title, description }
} = Astro.props as Props;

const { pathname } = Astro.url;
const isHomePage = pathname === "/";
---

<html lang="en" class="scroll-smooth">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>{title}</title>
		<meta name="description" content={description} />
		<meta name="author" content={AppConfig.author} />

		<link rel="sitemap" href="/404.astro" />
		<link rel="alternate" type="application/rss+xml" href="/rss.xml" />
		<link
			rel="icon"
			href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ› ï¸</text></svg>"
		/>
		<PostHog />
	</head>
	<body
		class="flex min-h-screen flex-col bg-stone-100 font-mono text-gray-950 dark:bg-stone-900 dark:text-white"
	>
		<Navbar />

		{
			!isHomePage && (
				/* ä½¿ç”¨ Section ç¡®ä¿ä¸ About/Post å†…å®¹çš„å·¦è¾¹ç¼˜åƒç´ çº§å¯¹é½ */
				/* æˆ‘ä»¬æ‰‹åŠ¨è¦†ç›–ä¸€éƒ¨åˆ† Section çš„é»˜è®¤ marginï¼Œè®©å®ƒæ›´ç´§å‡‘ */
				<div class="contents"> 
					<Section>
						<button
							onclick="history.back()"
							class="group mb-0 mt-0 flex w-fit items-center gap-1 rounded-lg border border-gray-300 bg-white/50 px-3 py-1 text-sm text-gray-600 transition-all hover:border-orange-500 hover:text-orange-600 dark:border-stone-700 dark:bg-stone-800/50 dark:text-gray-400 dark:hover:text-orange-400"
						>
							<svg
								xmlns="http://www.w3.org/2000/svg"
								width="16"
								height="16"
								viewBox="0 0 24 24"
								fill="none"
								stroke="currentColor"
								stroke-width="2.5"
								stroke-linecap="round"
								stroke-linejoin="round"
								class="transition-transform group-hover:-translate-x-1"
							>
								<path d="m15 18-6-6 6-6" />
							</svg>
							<span>Back</span>
						</button>
					</Section>
				</div>
			)
		}

		<main class="flex-1">
			<slot /> 
		</main>

		<Footer />
	</body>
</html>

<style is:global>
  /* è§£å†³ä»£ç å—æº¢å‡ºå¯¼è‡´çš„æ»‘åŠ¨ï¼Œè¿™æ˜¯æœ€å¸¸è§çš„ Post é¡µé¢æ»‘åŠ¨åŸå›  */
  pre {
    max-width: 100%;
    overflow-x: auto !important;
  }

  html, body {
  /* clip æ˜¯å…³é”®ï¼šå®ƒå‰ªæ‰æº¢å‡ºçš„ç›®å½•ï¼Œä½†ä¸ä¼šåƒ hidden é‚£æ ·é”æ­»æ»šåŠ¨æ¡æˆ–ç ´å sticky */
  overflow-x: clip; 
  width: 100%;
  }

  /* æ ¸å¿ƒï¼šç¡®ä¿ä¸ç ´å position: sticky (ç›®å½•è·Ÿéš) */
  /* ä¸è¦åœ¨è¿™é‡Œç»™ body æˆ– main åŠ  overflow-x: hidden */
</style>