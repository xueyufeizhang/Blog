---
import { MarkdownInstance } from 'astro';
import Section from './Section.astro';
import Heading from './Heading.astro';
import Tag from './Tag.astro';

const allPosts = Object.values(
	import.meta.glob('../pages/posts/*.md', { eager: true })
) as MarkdownInstance<any>[];

// Extract all unique tags from posts
const allTagsSet: Set<string> = new Set(
	allPosts
		.map((post: MarkdownInstance<Record<string, any>>) => post.frontmatter.tags)
		.flat()
		.filter(Boolean)
);

const allTags = Array.from(allTagsSet).sort();
---

<Section>
	<Heading title="Tags" />
    <!-- <p class="text-xl font-bold"># Latest Posts</p> -->
	<div class="flex flex-wrap gap-2 pt-4">
		{
			allTags.map((tag: string) => (
				<a href={`/tags/${tag}`} class="hover:opacity-70 transition-opacity">
					<Tag tag={tag} />
				</a>
			))
		}
	</div>
</Section>
